# データベース正規化


## 1. 第一正規形
ECサイトを第一正規形になるようテーブルを設計する  
テーブル名と、テーブルに紐づくカラム名とプライマリーキーを記載する  
その際に、下記のポイントを抑えること
- アプリケーションとして成立すること（プログラムを組んだ際に仕様を満たして動作すること）
- テーブルごとにプライマリーキーが設定されていること
- 1つのセルに1つの値のみが含まれること

| 購入ID | 購入日  | ユーザーID | 名前   | 商品ID | 商品名                             | 値段      | カテゴリーID | カテゴリー名  |
| ---- | ---- | ------ | ---- | ---- | ------------------------------- | ------- | ------- | ------- |
| 1    | 4/14 | 1      | 山田太郎 | 1    | iPhone 13                       | 100,000 | 6       | スマートフォン |
| 2    | 4/17 | 1      | 山田太郎 | 2    | キリン一番搾り生ビール10本                  | 2,000   | 5       | ビール     |
| 3    | 4/15 | 2      | 田中花子 | 3    | MacBook Air M2                  | 164,800 | 4       | PC      |
| 3    | 4/15 | 2      | 田中花子 | 4    | 綾鷹                              | 120     | 3       | 緑茶      |
| 4    | 4/16 | 3      | 鈴木一郎 | 5    | HHKB Professional HYBRID Type-S | 36,850  | 2       | キーボード   |
| 4    | 4/16 | 3      | 鈴木一郎 | 6    | MX ERGO                         | 15,000  | 1       | マウス     |

```text
## 解答例
[ユーザーテーブル]
- ID
- 名前
プライマリーキー：ID
```

```text
## 解答
[購入商品/ユーザー/商品/カテゴリーテーブル]
- 購入ID
- 購入日
- ユーザーID
- 名前
- 商品ID
- 商品名
- 値段
- カテゴリーID
- カテゴリー名
プライマリーキー：購入ID
```

## 2. 第二正規形
ECサイトの第一正規形の設計を、第二正規形になるようテーブルを設計する  
テーブル名と、テーブルに紐づくカラム名とプライマリーキーを記載する  
その際に、下記のポイントを抑えること
- アプリケーションとして成立すること（プログラムを組んだ際に仕様を満たして動作すること）
- 部分的関数従属性がないこと

### [購入テーブル]
| 購入ID(PK) | 購入日  | ユーザーID | 名前   |
| -------- | ---- | ------ | ---- |
| 1        | 4/14 | 1      | 山田太郎 |
| 2        | 4/17 | 1      | 山田太郎 |
| 3        | 4/15 | 2      | 田中花子 |
| 4        | 4/16 | 3      | 鈴木一郎 |

### [購入商品テーブル]
| 購入ID(PK) | 商品ID |
| -------- | ---- |
| 1        | 1    |
| 2        | 2    |
| 3        | 3    |
| 3        | 4    |
| 4        | 5    |
| 4        | 6    |

### [商品テーブル]
| 商品ID(PK) | 商品名                             | 値段      | カテゴリーID | カテゴリー名  |
| -------- | ------------------------------- | ------- | ------- | ------- |
| 1        | iPhone 13                       | 100,000 | 6       | スマートフォン |
| 2        | キリン一番搾り生ビール10本                  | 2,000   | 5       | ビール     |
| 3        | MacBook Air M2                  | 164,800 | 4       | PC      |
| 4        | 綾鷹                              | 120     | 3       | 緑茶      |
| 5        | HHKB Professional HYBRID Type-S | 36,850  | 2       | キーボード   |
| 6        | MX ERGO                         | 15,000  | 1       | マウス     |


## 3. 第三正規形
ECサイトの第二正規形の設計を、第三正規形になるうテーブルを設計する  
テーブル名と、テーブルに紐づくカラム名とプライマリーキーを記載する  

### 要件
- カテゴリーIDをキーとして、カテゴリーごとに商品を検索できる

その際に、下記のポイントを抑えること  
- アプリケーションとして成立すること（プログラムを組んだ際に仕様を満たして動作すること）
- 推移的関数従属性がないこと

### [購入テーブル]
| 購入ID(PK) | 購入日  |
| -------- | ---- |
| 1        | 4/14 |
| 2        | 4/17 |
| 3        | 4/15 |
| 4        | 4/16 |


| ユーザーID(PK) | 名前   |
| ---------- | ---- |
| 1          | 山田太郎 |
| 1          | 山田太郎 |
| 2          | 田中花子 |
| 3          | 鈴木一郎 |

### [購入商品テーブル]
| 購入ID(PK) | 商品ID |
| -------- | ---- |
| 1        | 1    |
| 2        | 2    |
| 3        | 3    |
| 3        | 4    |
| 4        | 5    |
| 4        | 6    |

### [商品テーブル]
| 商品ID(PK) | 商品名                             | 値段      |
| -------- | ------------------------------- | ------- |
| 1        | iPhone 13                       | 100,000 |
| 2        | キリン一番搾り生ビール10本                  | 2,000   |
| 3        | MacBook Air M2                  | 164,800 |
| 4        | 綾鷹                              | 120     |
| 5        | HHKB Professional HYBRID Type-S | 36,850  |
| 6        | MX ERGO                         | 15,000  |


| カテゴリーID(PK) | カテゴリー名  |
| ----------- | ------- |
| 6           | スマートフォン |
| 5           | ビール     |
| 4           | PC      |
| 3           | 緑茶      |
| 2           | キーボード   |
| 1           | マウス     |
 
## 4. ボイスコッド正規形
病院の管理システムのデータベースを設計する  
テーブル名と、テーブルに紐づくカラム名とプライマリーキーを記載する  
テーブルがボイスコッド正規形になるよう設計する

### 要件
- 患者と診療科が決まると担当医師も決まる(担当医師は一人のみ)
- 一人の医師は一つの診療科を担当する
- 一人の患者は複数の診療科を受診することがある

```text
[担当医師テーブル]
患者
診療科
担当医師
プライマリーキー：患者, 診療科
```

### 第3正規形
### [担当医師テーブル]
{患者ID, 診療科} -> {担当医師}  
{担当医師} -> {診療科}


| 患者(PK) | 診療科(PK) | 担当医師 |
| ------ | ------- | ---- |
| P001   | 001     | D001 |
| P002   | 001     | D002 |
| P002   | 002     | D003 |
| P003   | 001     | D001 |
| P003   | 002     | D003 |
| P004   | 002     | D004 |

### ボイスコッド正規形
### [患者 - 担当医師 テーブル]
| 患者(PK) | 担当医師(PK) |
| ------ | ------- |
| P001   | D001 |
| P002   | D002 |
| P002   | D003 |
| P003   | D001 |
| P003   | D003 |
| P004   | D004 |


### [担当医師 - 診療科 テーブル]
| 担当医師(PK) | 診療科(PK) |
| ------ | ------- |
| D001   | 001     |
| D002   | 001     |
| D003   | 002     |
| D004   | 002     |
